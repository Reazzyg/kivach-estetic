<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  .container {
    width: 1000px;
    height: 500px;
    background-color: grey;
    margin: auto;
    position: relative;
  }

  .card {
    width: 150px;
    height: 150px;
    background-color: red;
    position: absolute;
  }

  .card1 {
    left: -100px;
  }

  .card2 {
    right: -100px;
  }
</style>

<body>

  <div class="container">
    <div class="card card1"></div>
    <div class="card card2"></div>

  </div>


</body>

</html>

<?php
$title = 'Отзывы';
include("components/header.php");
$table_name = "comments";

// Определение текущей страницы
$current_page = isset($_GET['page']) ? intval($_GET['page']) : 1;
$comments_per_page = 6;

// Получение общего количества комментариев
$count_query = sqlQuery("SELECT COUNT(*) AS total FROM `$table_name`");
$total_comments = mysqli_fetch_assoc($count_query)['total'];

// Вычисление общего количества страниц
$total_pages = ceil($total_comments / $comments_per_page);

// Определение смещения для выборки комментариев
$offset = ($current_page - 1) * $comments_per_page;

// Получение комментариев для текущей страницы
$query = "SELECT * FROM `$table_name` ORDER BY id DESC LIMIT $offset, $comments_per_page";
$result = sqlQuery($query);
?>

<section class="hero hero-comments">
  <div class="container">
    <h1 class="title">Отзывы</h1>

    <div class="comments-container">
      <div class="comments">
        <?php if ($result && sqlNumRows($result) > 0) : ?>
        <?php while ($comment = mysqli_fetch_assoc($result)) : ?>
        <div class="comment">
          <div class="comment-rating">
            <?php
                $img = '<img src="assets/img/Star-filled.svg" alt="" class="comment-rating__star">';
                $final_str = str_repeat($img, intval($comment['rating']));
                echo $final_str;
                ?>
          </div>
          <p class="comment__text"><?php echo $comment['message'] ?></p>
          <div class="comment-profile">
            <p class="comment-profile__name"><?php echo $comment['name'] ?></p>
          </div>
        </div>
        <?php endwhile; ?>
        <?php else : ?>
        <p>Нет комментариев для отображения.</p>
        <?php endif; ?>
      </div>
      <!-- /.comments -->

      <!-- Отправка комментария -->
      <sendForm></sendForm>
    </div>
    <!-- /.comments-container -->

    <!-- Пагинация -->
    <section class="pagination">
      <?php if ($current_page > 1) : ?>
      <a href="?page=<?php echo $current_page - 1 ?>" class="pagination-prev">
        <img src="<?php get_img_path() ?>arrow-prev.svg" alt="" class="pagination__img">
      </a>
      <?php endif; ?>
      <?php for ($i = 1; $i <= $total_pages; $i++) : ?>
      <div class="pagination-page <?php echo ($i == $current_page) ? 'pagination-page-active' : ''; ?>">
        <a href="?page=<?php echo $i ?>"><?php echo $i ?></a>
      </div>
      <?php endfor; ?>
      <?php if ($current_page < $total_pages) : ?>
      <a href="?page=<?php echo $current_page + 1 ?>"